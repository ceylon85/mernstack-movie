{"ast":null,"code":"import _slicedToArray from \"/Users/heavenvoice/Desktop/code/mernstack-movie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/heavenvoice/Desktop/code/mernstack-movie/client/src/components/views/MovieDetail/MovieDetail.js\";\nimport React, { useEffect, useState } from 'react';\nimport { List, Avatar, Row, Col, Button } from 'antd';\nimport axios from 'axios';\nimport Comments from './Sections/Comments';\nimport LikeDislikes from './Sections/LikeDislikes';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, IMAGE_SIZE } from '../../Config';\nimport GridCards from '../commons/GridCards';\nimport MainImage from '../../views/LandingPage/Sections/MainImage';\nimport MovieInfo from './Sections/MovieInfo';\nimport Favorite from './Sections/Favorite';\n\nfunction MovieDetailPage(props) {\n  const movieId = props.match.params.movieId;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        Movie = _useState2[0],\n        setMovie = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Casts = _useState4[0],\n        setCasts = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        CommentLists = _useState6[0],\n        setCommentLists = _useState6[1];\n\n  const _useState7 = useState(true),\n        _useState8 = _slicedToArray(_useState7, 2),\n        LoadingForMovie = _useState8[0],\n        setLoadingForMovie = _useState8[1];\n\n  const _useState9 = useState(true),\n        _useState10 = _slicedToArray(_useState9, 2),\n        LoadingForCasts = _useState10[0],\n        setLoadingForCasts = _useState10[1];\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        ActorToggle = _useState12[0],\n        setActorToggle = _useState12[1];\n\n  const movieVariable = {\n    movieId: movieId\n  };\n  useEffect(() => {\n    let endpointForMovieInfo = \"\".concat(API_URL, \"movie/\").concat(movieId, \"?api_key=\").concat(API_KEY, \"&language=en-US\");\n    fetchDetailInfo(endpointForMovieInfo);\n    axios.post('/api/comment/getComments', movieVariable).then(response => {\n      console.log(response);\n\n      if (response.data.success) {\n        console.log('response.data.comments', response.data.comments);\n        setCommentLists(response.data.comments);\n      } else {\n        alert('Failed to get comments Info');\n      }\n    });\n  }, []);\n\n  const toggleActorView = () => {\n    setActorToggle(!ActorToggle);\n  };\n\n  const fetchDetailInfo = endpoint => {\n    fetch(endpoint).then(result => result.json()).then(result => {\n      console.log(result);\n      setMovie(result);\n      setLoadingForMovie(false);\n      let endpointForCasts = \"\".concat(API_URL, \"movie/\").concat(movieId, \"/credits?api_key=\").concat(API_KEY);\n      fetch(endpointForCasts).then(result => result.json()).then(result => {\n        console.log(result);\n        setCasts(result.cast);\n      });\n      setLoadingForCasts(false);\n    }).catch(error => console.error('Error:', error));\n  };\n\n  const updateComment = newComment => {\n    setCommentLists(CommentLists.concat(newComment));\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, !LoadingForMovie ? React.createElement(MainImage, {\n    image: \"\".concat(IMAGE_BASE_URL).concat(IMAGE_SIZE).concat(Movie.backdrop_path),\n    title: Movie.original_title,\n    text: Movie.overview,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"loading...\"), React.createElement(\"div\", {\n    style: {\n      width: '85%',\n      margin: '1rem auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'flex-end'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Favorite, {\n    movieInfo: Movie,\n    movieId: movieId,\n    userFrom: localStorage.getItem('userId'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), !LoadingForMovie ? React.createElement(MovieInfo, {\n    movie: Movie,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"loading...\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      margin: '2rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: toggleActorView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Toggle Actor View \")), ActorToggle && React.createElement(Row, {\n    gutter: [16, 16],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, !LoadingForCasts ? Casts.map((cast, index) => cast.profile_path && React.createElement(GridCards, {\n    image: cast.profile_path ? \"\".concat(IMAGE_BASE_URL, \"w500\").concat(cast.profile_path) : null,\n    characterName: cast.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"loading...\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(LikeDislikes, {\n    video: true,\n    videoId: movieId,\n    userId: localStorage.getItem('userId'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  })), React.createElement(Comments, {\n    movieTitle: Movie.original_title,\n    CommentLists: CommentLists,\n    postId: movieId,\n    refreshFunction: updateComment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  })));\n}\n\nexport default MovieDetailPage;","map":{"version":3,"sources":["/Users/heavenvoice/Desktop/code/mernstack-movie/client/src/components/views/MovieDetail/MovieDetail.js"],"names":["React","useEffect","useState","List","Avatar","Row","Col","Button","axios","Comments","LikeDislikes","API_URL","API_KEY","IMAGE_BASE_URL","IMAGE_SIZE","GridCards","MainImage","MovieInfo","Favorite","MovieDetailPage","props","movieId","match","params","Movie","setMovie","Casts","setCasts","CommentLists","setCommentLists","LoadingForMovie","setLoadingForMovie","LoadingForCasts","setLoadingForCasts","ActorToggle","setActorToggle","movieVariable","endpointForMovieInfo","fetchDetailInfo","post","then","response","console","log","data","success","comments","alert","toggleActorView","endpoint","fetch","result","json","endpointForCasts","cast","catch","error","updateComment","newComment","concat","backdrop_path","original_title","overview","width","margin","display","justifyContent","localStorage","getItem","map","index","profile_path","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { List, Avatar, Row, Col, Button } from 'antd';\nimport axios from 'axios';\n\nimport Comments from './Sections/Comments'\nimport LikeDislikes from './Sections/LikeDislikes';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, IMAGE_SIZE } from '../../Config'\nimport GridCards from '../commons/GridCards';\nimport MainImage from '../../views/LandingPage/Sections/MainImage';\nimport MovieInfo from './Sections/MovieInfo';\nimport Favorite from './Sections/Favorite';\nfunction MovieDetailPage(props) {\n\n    const movieId = props.match.params.movieId\n    const [Movie, setMovie] = useState([])\n    const [Casts, setCasts] = useState([])\n    const [CommentLists, setCommentLists] = useState([])\n    const [LoadingForMovie, setLoadingForMovie] = useState(true)\n    const [LoadingForCasts, setLoadingForCasts] = useState(true)\n    const [ActorToggle, setActorToggle] = useState(false)\n    const movieVariable = {\n        movieId: movieId\n    }\n\n    useEffect(() => {\n\n        let endpointForMovieInfo = `${API_URL}movie/${movieId}?api_key=${API_KEY}&language=en-US`;\n        fetchDetailInfo(endpointForMovieInfo)\n\n        axios.post('/api/comment/getComments', movieVariable)\n            .then(response => {\n                console.log(response)\n                if (response.data.success) {\n                    console.log('response.data.comments', response.data.comments)\n                    setCommentLists(response.data.comments)\n                } else {\n                    alert('Failed to get comments Info')\n                }\n            })\n\n    }, [])\n\n    const toggleActorView = () => {\n        setActorToggle(!ActorToggle)\n    }\n\n    const fetchDetailInfo = (endpoint) => {\n\n        fetch(endpoint)\n            .then(result => result.json())\n            .then(result => {\n                console.log(result)\n                setMovie(result)\n                setLoadingForMovie(false)\n\n                let endpointForCasts = `${API_URL}movie/${movieId}/credits?api_key=${API_KEY}`;\n                fetch(endpointForCasts)\n                    .then(result => result.json())\n                    .then(result => {\n                        console.log(result)\n                        setCasts(result.cast)\n                    })\n\n                setLoadingForCasts(false)\n            })\n            .catch(error => console.error('Error:', error)\n            )\n    }\n\n    const updateComment = (newComment) => {\n        setCommentLists(CommentLists.concat(newComment))\n    }\n\n    return (\n        <div>\n            {/* Header */}\n            {!LoadingForMovie ?\n                <MainImage\n                    image={`${IMAGE_BASE_URL}${IMAGE_SIZE}${Movie.backdrop_path}`}\n                    title={Movie.original_title}\n                    text={Movie.overview}\n                />\n                :\n                <div>loading...</div>\n            }\n\n\n            {/* Body */}\n            <div style={{ width: '85%', margin: '1rem auto' }}>\n\n                <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                    <Favorite movieInfo={Movie} movieId={movieId} userFrom={localStorage.getItem('userId')} />\n                </div>\n\n\n                {/* Movie Info */}\n                {!LoadingForMovie ?\n                    <MovieInfo movie={Movie} />\n                    :\n                    <div>loading...</div>\n                }\n\n                <br />\n                {/* Actors Grid*/}\n\n                <div style={{ display: 'flex', justifyContent: 'center', margin: '2rem' }}>\n                    <Button onClick={toggleActorView}>Toggle Actor View </Button>\n                </div>\n\n                {ActorToggle &&\n                    <Row gutter={[16, 16]}>\n                        {\n                            !LoadingForCasts ? Casts.map((cast, index) => (\n                                cast.profile_path &&\n                                <GridCards\n                                    image={cast.profile_path ?\n                                        `${IMAGE_BASE_URL}w500${cast.profile_path}` : null}\n                                    characterName={cast.name}\n                                />)) :\n                                <div>loading...</div>\n                        }\n                    </Row>\n                }\n                <br />\n\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                    <LikeDislikes video videoId={movieId} userId={localStorage.getItem('userId')} />\n                </div>\n\n                {/* Comments */}\n                <Comments movieTitle={Movie.original_title} CommentLists={CommentLists} postId={movieId} refreshFunction={updateComment} />\n\n            </div>\n\n        </div>\n    )\n}\n\nexport default MovieDetailPage"]},"metadata":{},"sourceType":"module"}